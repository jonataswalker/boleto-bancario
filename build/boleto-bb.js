/*!
 * boleto-bb - v0.0.1
 * Boleto para o Banco do Brasil
 * https://github.com/jonataswalker/boleto-bb
 * Built: Fri Jan 27 2017 20:01:59 GMT-0200 (BRST)
 */
!function(t,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a(require("vue"),require("moment")):"function"==typeof define&&define.amd?define(["vue","moment"],a):t.BoletoBB=a(t.Vue,t.moment)}(this,function(t,a){"use strict";t="default"in t?t.default:t,a="default"in a?a.default:a;var s={zeroPad:function(t,a){for(var s=t+"";s.length<a;)s="0"+s;return s},formataDinheiro:function(t){return t.toFixed(2).replace(".",",").replace(/(\d)(?=(\d{3})+,)/g,"$1.")},format:function(t,a,s,e,o){var i=["\\d(?=(\\d{",s||3,"})+",a>0?"\\D":"$",")"].join(""),c=t.toFixed(Math.max(0,~~a));return(o?c.replace(".",o):c).replace(new RegExp(i,"g"),"$&"+(e||","))},numberFormat:function(t,a,s,e){t=(t+"").replace(/[^0-9+\-Ee.]/g,"");var o=isFinite(+t)?+t:0,i=isFinite(+a)?Math.abs(a):0,c="undefined"==typeof e?",":e,r="undefined"==typeof s?".":s,n="",l=function(t,a){var s=Math.pow(10,a);return""+(Math.round(t*s)/s).toFixed(a)};return n=(i?l(o,i):""+Math.round(o)).split("."),n[0].length>3&&(n[0]=n[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,c)),(n[1]||"").length<i&&(n[1]=n[1]||"",n[1]+=new Array(i-n[1].length+1).join("0")),n.join(r)},merge:function(t,a){var s={};for(var e in t)s[e]=t[e];for(var o in a)s[o]=a[o];return s},assert:function(t,a){if(void 0===a&&(a="Assertion failed"),!t){if("undefined"!=typeof Error)throw new Error(a);throw a}}},e={agencia:"",agenciaDv:"",agenciaCodigo:"",conta:"",contaDv:"",codigo:"",codigoDv:"",contrato:"",nome:"",cnpj:""},o={nome:"",cpf:"",endereco:""},i={codBanco:"001-9",especie:"R$",aceite:"N",qtde:1,carteira:18,variacaoCarteira:"",nossoNumero:12345,numDoc:12345,sequencial:1234567,convenio:1234,dataEmissao:"",dataVencimento:"",valor:"",taxaJuros:"",taxaMulta:"",instrucao1:"",instrucao2:"",instrucao3:"",instrucao4:"",instrucao5:"",instrucao6:""},c={bb:1},r=9,n=!1,l={getAgenciaCodigoCedente:function(){var t=v.$data.cedente,a=t.agenciaDv?[t.agencia,t.agenciaDv].join("-"):t.agencia,s=t.contaDv?[t.conta,t.contaDv].join("-"):t.conta;return[a,s].join(" / ")},getImagemCodigoDeBarras:function(){for(var t=this,a=this.getNumeroFebraban(),s=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"],e=9;e>=0;e--)for(var o=9;o>=0;o--){for(var i=10*e+o,c="",r=1;r<6;r++)c+=s[e].substr(r-1,1)+s[o].substr(r-1,1);s[i]=c}var n=['<div class="barcode">','<div class="black thin"></div>','<div class="white thin"></div>','<div class="black thin"></div>','<div class="white thin"></div>'].join("");for(a.length%2!==0&&(a="0"+a);a.length>0;){var l=Math.round(+t.caracteresEsquerda(a,2)),d=s[l];a=t.caracteresDireita(a,a.length-2);for(var u=1;u<11;u+=2){var v="0"===d.substr(u-1,1)?"thin":"large",C="0"===d.substr(u,1)?"thin":"large";n+='<div class="black '+v+'"></div>',n+='<div class="white '+C+'"></div>'}}return[n,'<div class="black large"></div>','<div class="white thin"></div>','<div class="black thin"></div>',"</div>"].join("")},getLinhaDigitavel:function(){var t=d.getCampoLivre(),a={"20-24":t.substr(0,5),"25-34":t.substr(5,10),"35-44":t.substr(15,10)},s=this.modulo10([d.getCodigoBanco(),r,a["20-24"]].join(""));a["20-24"]=[a["20-24"][0],".",a["20-24"].substr(1)].join("");var e=[d.getCodigoBanco(),r,a["20-24"],s].join("");s=this.modulo10(a["25-34"]);var o=a["25-34"]+s;o=[o.substr(0,5),".",o.substr(5)].join(""),s=this.modulo10(a["35-44"]);var i=a["35-44"]+s;i=[i.substr(0,5),".",i.substr(5)].join("");var c=this.getDigitoVerificador(),n=this.getFatorVencimento()+this.getValorZeroFill();return[e,o,i,c,n].join(" ")},getNumeroFebraban:function(){return[s.zeroPad(v.$data.bancoAtivo,3),r,this.getDigitoVerificador(),this.getFatorVencimento(),this.getValorZeroFill(),d.getCampoLivre()].join("")},getDigitoVerificador:function(){var t=[s.zeroPad(v.$data.bancoAtivo,4),r,this.getFatorVencimento(),this.getValorZeroFill(),d.getCampoLivre()].join(""),a=this.modulo11(t);return[0,1,10].includes(a.resto)?1:11-a.resto},getNossoNumero:function(t){void 0===t&&(t=!0);var a=v.$data.boleto.nossoNumero;return t?a:a.replace(/[^\d]/g,"")},getFatorVencimento:function(){if(n)return"0000";var t=a(v.$data.boleto.dataVencimento,"DD/MM/YYYY");return t.diff(a("1997-10-07","YYYY-MM-DD"),"days")},getValorZeroFill:function(){var t=v.$data.boleto.valor;return s.zeroPad(s.numberFormat(t,2,"",""),10)},caracteresEsquerda:function(t,a){return t.substr(0,a)},caracteresDireita:function(t,a){return t.substr(t.length-a,a)},modulo10:function(t){for(var a=0,s=2,e=[],o=[],i=t.length;i>0;i--){e[i]=t.substr(i-1,1);var c=e[i]*s,r=c.toString().split("").reduce(function(t,a){return+t+ +a},0);o[i]=r,a+=o[i],s=2===s?1:2}var n=a%10,l=10-n;return 10===l?0:l},modulo11:function(t,a){void 0===a&&(a=9);var s,e=2,o=0,i=[],c=[],r={};for(s=t.length;s>0;s--)i[s]=t.substr(s-1,1),c[s]=i[s]*e,o+=c[s],e===a&&(e=1),e++;return r.digito=10*o%11,r.resto=o%11,r.digito=10===r.digito?0:r.digito,r}},d={getCodigoBanco:function(){return"001"},geraNossoNumero:function(){var t=v.$data.boleto,a=t.convenio,e=t.sequencial,o=t.carteira,i=null;switch(a.toString().length){case 4:i=s.zeroPad(a,4)+s.zeroPad(e,7);break;case 6:i=21===o?s.zeroPad(e,17):s.zeroPad(a,6)+s.zeroPad(e,5);break;case 7:i=s.zeroPad(a,7)+s.zeroPad(e,10);break;default:throw new Error("O código do convênio precisa ter 4, 6 ou 7 dígitos!")}if(i.length<17){var c=l.modulo11(i);i+="-"+c.digito}return i},getCampoLivre:function(){var t=v.$data.boleto,a=t.convenio.toString().length,e=t.nossoNumero;if(e=l.getNossoNumero().length<17?e.substr(0,e.length-2):e,t.sequencial.toString().length>10){if(6===a&&21===t.carteira)return[s.zeroPad(t.convenio,6),e,21].join("");throw new Error("Só é possível criar um boleto com mais de 10 dígitos no nosso número quando a carteira é 21 e o convênio possuir 6 dígitos.")}switch(a){case 4:case 6:return[e,s.zeroPad(v.$data.cedente.agencia,4),s.zeroPad(v.$data.cedente.conta,8),s.zeroPad(t.carteira,2)].join("");case 7:return["000000",e,s.zeroPad(t.carteira,2)].join("")}throw new Error("O código do convênio precisa ter 4, 6 ou 7 dígitos!")}},u={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"container"}},[s("div",{staticClass:"boleto"},[s("table",{staticClass:"header",attrs:{cellspacing:"0",cellpadding:"0"}},[s("tr",[s("td",{staticClass:"logoBanco"},[s("img",{attrs:{src:t.logoBanco}})]),s("td",{staticClass:"codBanco"},[s("div",[t._v(t._s(t.B.codBanco))])]),s("td",{staticClass:"linhaDigitavel"},[t._v(t._s(t.linhaDigitavel))])])]),s("table",{staticClass:"line",attrs:{cellspacing:"0",cellpadding:"0"}},[t._m(0),s("tr",{staticClass:"campos"},[s("td",{staticClass:"cedente"},[t._v(t._s(t.C.nome))]),s("td",{staticClass:"agCedente"},[t._v(t._s(t.C.agenciaCodigo))]),s("td",{staticClass:"especie"},[t._v(t._s(t.B.especie))]),s("td",{staticClass:"qtd"},[t._v(t._s(t.B.qtde))]),s("td",{staticClass:"nossoNumero"},[t._v(t._s(t.B.nossoNumero))])])]),s("table",{staticClass:"line",attrs:{cellspacing:"0",cellpadding:"0"}},[t._m(1),s("tr",{staticClass:"campos"},[s("td",{staticClass:"numDoc"},[t._v(t._s(t.B.numDoc))]),s("td",{staticClass:"contrato"},[t._v(t._s(t.C.contrato))]),s("td",{staticClass:"cpfCnpj"},[t._v(t._s(t.C.cpfCnpj))]),s("td",{staticClass:"vencimento"},[t._v(t._s(t.B.dataVencimento))]),s("td",{staticClass:"valorDoc"},[t._v(t._s(t.B.valor))])])]),t._m(2),s("table",{staticClass:"line",attrs:{cellspacing:"0",cellpadding:"0"}},[t._m(3),s("tr",{staticClass:"campos"},[s("td",{staticClass:"sacado"},[t._v(t._s(t.nomeCedente))])])]),t._m(4),t._m(5),s("table",{staticClass:"header",attrs:{cellspacing:"0",cellpadding:"0"}},[s("tr",[s("td",{staticClass:"logoBanco"},[s("img",{attrs:{src:t.logoBanco}})]),s("td",{staticClass:"codBanco"},[s("div",[t._v(t._s(t.B.codBanco))])]),s("td",{staticClass:"linhaDigitavel"},[t._v(t._s(t.linhaDigitavel))])])]),s("table",{staticClass:"line",attrs:{cellspacing:"0",cellpadding:"0"}},[t._m(6),s("tr",{staticClass:"campos"},[s("td",{staticClass:"localPgto"},[t._v("QUALQUER BANCO ATÉ O VENCIMENTO")]),s("td",{staticClass:"vencimento2"},[t._v(t._s(t.B.dataVencimento))])])]),s("table",{staticClass:"line",attrs:{cellspacing:"0",cellpadding:"0"}},[t._m(7),s("tr",{staticClass:"campos"},[s("td",{staticClass:"cedente2"},[t._v(t._s(t.C.nome))]),s("td",{staticClass:"agCedente2"},[t._v(t._s(t.C.agenciaCodigo))])])]),s("table",{staticClass:"line",attrs:{cellspacing:"0",cellpadding:"0"}},[t._m(8),s("tr",{staticClass:"campos"},[s("td",{staticClass:"dataDoc"},[t._v(t._s(t.B.dataEmissao))]),s("td",{staticClass:"numDoc2"},[t._v(t._s(t.B.numDoc))]),s("td",{staticClass:"especieDoc"},[t._v(t._s(t.B.especie))]),s("td",{staticClass:"aceite"},[t._v(t._s(t.B.aceite))]),s("td",{staticClass:"dataProcess"},[t._v(t._s(t.B.dataEmissao))]),s("td",{staticClass:"nossoNumero2"},[t._v(t._s(t.B.nossoNumero))])])]),s("table",{staticClass:"line",attrs:{cellspacing:"0",cellpadding:"0"}},[t._m(9),s("tr",{staticClass:"campos"},[s("td",{staticClass:"reservado"},[t._v(" ")]),s("td",{staticClass:"carteira"},[t._v(t._s(t.B.carteira+t.B.variacaoCarteira?t.B.variacaoCarteira:" "))]),s("td",{staticClass:"especie2"},[t._v(t._s(t.B.especie))]),s("td",{staticClass:"qtd2"},[t._v(t._s(t.B.qtde))]),s("td",{staticClass:"xvalor"}),s("td",{staticClass:"valorDoc"},[t._v(t._s(t.B.valor))])])]),s("table",{staticClass:"line",attrs:{cellspacing:"0",cellpadding:"0"}},[s("tr",[s("td",{staticClass:"lastLine",attrs:{rowspan:"6"}},[s("table",{staticClass:"line",attrs:{cellspacing:"0",cellpadding:"0"}},[t._m(10),s("tr",{staticClass:"campos"},[s("td",{staticClass:"instrucoes",attrs:{rowspan:"5"}},[s("p",[t._v(t._s(t.B.instrucao1))]),s("p",[t._v(t._s(t.B.instrucao2))]),s("p",[t._v(t._s(t.B.instrucao3))]),s("p",[t._v(t._s(t.B.instrucao4))]),s("p",[t._v(t._s(t.B.instrucao5))]),s("p",[t._v(t._s(t.B.instrucao6))])])])])])]),t._m(11),t._m(12),t._m(13),t._m(14),t._m(15)]),s("table",{staticClass:"line",attrs:{cellspacing:"0",cellpadding:"0"}},[t._m(16),s("tr",{staticClass:"campos"},[s("td",{staticClass:"sacado2"},[s("p",[t._v(t._s(t.nomeCedente))]),s("p",[t._v(t._s(t.P.endereco))])])])]),t._m(17),s("div",{staticClass:"footer2"},[t._v("Autenticação mecânica - Ficha de Compensação")]),s("div",{staticClass:"barcode",domProps:{innerHTML:t._s(t.codigoBarras)}}),t._m(18)])])},staticRenderFns:[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("tr",{staticClass:"titulos"},[s("td",{staticClass:"cedente"},[t._v("Cedente")]),s("td",{staticClass:"agCedente"},[t._v("Agência / Código do Cedente")]),s("td",{staticClass:"especie"},[t._v("Espécie")]),s("td",{staticClass:"qtd"},[t._v("Quantidade")]),s("td",{staticClass:"nossoNumero"},[t._v("Nosso número")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("tr",{staticClass:"titulos"},[s("td",{staticClass:"numDoc"},[t._v("Número do documento")]),s("td",{staticClass:"contrato"},[t._v("Contrato")]),s("td",{staticClass:"cpfCnpj"},[t._v("CPF/CEI/CNPJ")]),s("td",{staticClass:"vencimento"},[t._v("Vencimento")]),s("td",{staticClass:"valorDoc"},[t._v("Valor documento")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("table",{staticClass:"line",attrs:{cellspacing:"0",cellpadding:"0"}},[s("tr",{staticClass:"titulos"},[s("td",{staticClass:"desconto"},[t._v("(-) Desconto / Abatimento")]),s("td",{staticClass:"outrasDeducoes"},[t._v("(-) Outras deduções")]),s("td",{staticClass:"moraMulta"},[t._v("(+) Mora / Multa")]),s("td",{staticClass:"outrosAcrescimos"},[t._v("(+) Outros acréscimos")]),s("td",{staticClass:"valorCobrado"},[t._v("(=) Valor cobrado")])]),s("tr",{staticClass:"campos"},[s("td",{staticClass:"desconto"},[t._v(" ")]),s("td",{staticClass:"outrasDeducoes"},[t._v(" ")]),s("td",{staticClass:"moraMulta"},[t._v(" ")]),s("td",{staticClass:"outrosAcrescimos"},[t._v(" ")]),s("td",{staticClass:"valorCobrado"},[t._v(" ")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("tr",{staticClass:"titulos"},[s("td",{staticClass:"sacado"},[t._v("Sacado")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"footer"},[s("p",[t._v("Autenticação mecânica")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"cut"},[s("p",[t._v("Corte na linha pontilhada")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("tr",{staticClass:"titulos"},[s("td",{staticClass:"localPgto"},[t._v("Local de pagamento")]),s("td",{staticClass:"vencimento2"},[t._v("Vencimento")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("tr",{staticClass:"titulos"},[s("td",{staticClass:"cedente2"},[t._v("Cedente")]),s("td",{staticClass:"agCedente2"},[t._v("Agência/Código cedente")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("tr",{staticClass:"titulos"},[s("td",{staticClass:"dataDoc"},[t._v("Data do documento")]),s("td",{staticClass:"numDoc2"},[t._v("No. documento")]),s("td",{staticClass:"especieDoc"},[t._v("Espécie doc.")]),s("td",{staticClass:"aceite"},[t._v("Aceite")]),s("td",{staticClass:"dataProcess"},[t._v("Data process.")]),s("td",{staticClass:"nossoNumero2"},[t._v("Nosso número")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("tr",{staticClass:"titulos"},[s("td",{staticClass:"reservado"},[t._v("Uso do banco")]),s("td",{staticClass:"carteira"},[t._v("Carteira")]),s("td",{staticClass:"especie2"},[t._v("Espécie")]),s("td",{staticClass:"qtd2"},[t._v("Quantidade")]),s("td",{staticClass:"xvalor"},[t._v("Valor")]),s("td",{staticClass:"valorDoc"},[t._v("(=) Valor documento")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("tr",{staticClass:"titulos"},[s("td",{staticClass:"instrucoes"},[t._v("Instruções (Texto de responsabilidade do cedente)")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("tr",[s("td",[s("table",{staticClass:"line",attrs:{cellspacing:"0",cellpadding:"0"}},[s("tr",{staticClass:"titulos"},[s("td",{staticClass:"desconto2"},[t._v("(-) Desconto / Abatimento")])]),s("tr",{staticClass:"campos"},[s("td",{staticClass:"desconto2"},[t._v(" ")])])])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("tr",[s("td",[s("table",{staticClass:"line",attrs:{cellspacing:"0",cellpadding:"0"}},[s("tr",{staticClass:"titulos"},[s("td",{staticClass:"outras_deducoes2"},[t._v("(-) Outras deduções")])]),s("tr",{staticClass:"campos"},[s("td",{staticClass:"outrasDeducoes2"},[t._v(" ")])])])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("tr",[s("td",[s("table",{staticClass:"line",attrs:{cellspacing:"0",cellpadding:"0"}},[s("tr",{staticClass:"titulos"},[s("td",{staticClass:"moraMulta2"},[t._v("(+) Mora / Multa")])]),s("tr",{staticClass:"campos"},[s("td",{staticClass:"moraMulta2"},[t._v(" ")])])])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("tr",[s("td",[s("table",{staticClass:"line",attrs:{cellspacing:"0",cellpadding:"0"}},[s("tr",{staticClass:"titulos"},[s("td",{staticClass:"outrosAcrescimos2"},[t._v("(+) Outros Acréscimos")])]),s("tr",{staticClass:"campos"},[s("td",{staticClass:"outrosAcrescimos2"},[t._v(" ")])])])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("tr",[s("td",{staticClass:"lastLine"},[s("table",{staticClass:"line",attrs:{cellspacing:"0",cellpadding:"0"}},[s("tr",{staticClass:"titulos"},[s("td",{staticClass:"valorCobrado2"},[t._v("(=) Valor cobrado")])]),s("tr",{staticClass:"campos"},[s("td",{staticClass:"valorCobrado2"},[t._v(" ")])])])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("tr",{staticClass:"titulos"},[s("td",{staticClass:"sacado2"},[t._v("Sacado")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("table",{staticClass:"line",attrs:{cellspacing:"0",cellpadding:"0"}},[s("tr",{staticClass:"titulos"},[s("td",{staticClass:"sacadorAvalista",attrs:{colspan:"2"}},[t._v("Sacador/Avalista")])]),s("tr",{staticClass:"campos"},[s("td",{staticClass:"sacadorAvalista"},[t._v(" ")]),s("td",{staticClass:"codBaixa"},[t._v("Cód. baixa")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"cut"},[s("p",[t._v("Corte na linha pontilhada")])])}],props:{cedente:Object,pagador:Object,boleto:Object},data:function(){return{C:this.cedente,P:this.pagador,B:this.boleto,nomeCedente:"",codigoBarras:"",linhaDigitavel:""}},mounted:function(){this.nomeCedente=this.P.nome+" - CPF/CNPJ: "+this.P.cpfCnpj,this.B.nossoNumero=d.geraNossoNumero(),this.C.agenciaCodigo=l.getAgenciaCodigoCedente(),this.codigoBarras=l.getImagemCodigoDeBarras(),this.linhaDigitavel=l.getLinhaDigitavel()}},v=new t({data:function(){return{cedente:e,pagador:o,boleto:i,bancoAtivo:c.bb}},render:function(t){return t(u,{props:{cedente:this.cedente,pagador:this.pagador,boleto:this.boleto}})}}),C=function(t){t&&"object"==typeof t&&(t.hasOwnProperty("cedente")&&this.setCedente(t.cedente),t.hasOwnProperty("pagador")&&this.setPagador(t.pagador),t.hasOwnProperty("boleto")&&this.geraBoleto(t.boleto))};return C.prototype.setCedente=function(t){v.$data.cedente=s.merge(v.$data.cedente,t)},C.prototype.setPagador=function(t){v.$data.pagador=s.merge(v.$data.pagador,t)},C.prototype.geraBoleto=function(t){v.$data.boleto=s.merge(v.$data.boleto,t)},C.prototype.render=function(t){v.$mount(t)},C});